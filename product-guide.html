
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Product Guide &#8212; DYFI V4 Manual</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Scientific Discussion" href="scientific-discussion.html" />
    <link rel="prev" title="Introduction to Did You Feel It? (DYFI)" href="introduction.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="product-guide">
<h1>Product Guide<a class="headerlink" href="#product-guide" title="Permalink to this headline">¶</a></h1>
<p>This section lists the available DYFI products and formats.</p>
<p>DYFI products are event-centric. Each product is tied to a specific Event ID. All products are created in its own subdirectory under that data directory, e.g. <em>data/nc72663506/</em>.</p>
<div class="section" id="dynamic-map-products">
<h2>Dynamic Map Products<a class="headerlink" href="#dynamic-map-products" title="Permalink to this headline">¶</a></h2>
<p>Filenames: <cite>dyfi_geo_1km.geojson</cite> and <cite>dyfi_geo_10km.geojson</cite></p>
<p>These are text files in GeoJSON format (see <a class="reference external" href="http://geojson.org/">http://geojson.org/</a>). Each file is a GeoJSON <cite>FeatureCollection</cite> where each <cite>Feature</cite> represents a UTM block area of either 1km or 10km size. This makes it easy to compare intensities at the same locations for different events.</p>
<p>Each <cite>Feature</cite> in the <cite>FeatureCollection</cite> represents one aggregated location (geocode block). For more information see <a class="reference internal" href="scientific-discussion.html#aggregation"><span class="std std-ref">Aggregation</span></a>.</p>
<p>Each <cite>Feature</cite> containts the following properties:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>type</p></td>
<td><p><strong>Feature</strong></p></td>
</tr>
<tr class="row-even"><td><p>id</p></td>
<td><p>The UTM string for this location</p></td>
</tr>
<tr class="row-odd"><td><p>location</p></td>
<td><p>Same as <em>id</em></p></td>
</tr>
<tr class="row-even"><td><p>nresp</p></td>
<td><p>The number of individual responses contributing to this block</p></td>
</tr>
<tr class="row-odd"><td><p>intensity</p></td>
<td><p>The aggregated intensity computed from these responses</p></td>
</tr>
<tr class="row-even"><td><p>center</p></td>
<td><p>A GeoJSON <cite>Point</cite> object indicating the center of this block</p></td>
</tr>
</tbody>
</table>
<p>In addition, the <cite>FeatureCollection</cite> object has its own keys and properties:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>name</p></td>
<td><p>The aggregation size (1km or 10 km)</p></td>
</tr>
<tr class="row-even"><td><p>id</p></td>
<td><p>same</p></td>
</tr>
<tr class="row-odd"><td><p>type</p></td>
<td><p>FeatureCollection</p></td>
</tr>
<tr class="row-even"><td><p>features</p></td>
<td><p>array of location Features, see below</p></td>
</tr>
<tr class="row-odd"><td><p>properties</p></td>
<td><p>see below</p></td>
</tr>
</tbody>
</table>
<p>The <cite>FeatureCollection</cite> properties are:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>nresp</p></td>
<td><p>The number of individual responses in the dataset for this file</p></td>
</tr>
<tr class="row-even"><td><p>maxint</p></td>
<td><p>The largest intensity value among aggregated locations</p></td>
</tr>
</tbody>
</table>
<p>We consider the GeoJSON products to be the “standard” DYFI product from which other products (static maps and graphs) are derived.</p>
</div>
<div class="section" id="static-map-products">
<h2>Static Map Products<a class="headerlink" href="#static-map-products" title="Permalink to this headline">¶</a></h2>
<div class="section" id="jpeg">
<h3>JPEG<a class="headerlink" href="#jpeg" title="Permalink to this headline">¶</a></h3>
<p>Filenames: <cite>dyfi_geo_1km.png</cite> and <cite>dyfi_geo_10km.png</cite></p>
<p>These PNG files are graphical representations of the GeoJSON data. There is one static image for each version of the aggregation (1 km and 10 km). The aggregated blocks are plotted with colors corresponding to intensity; the color scale is the same used by previous versions.</p>
<p>In addition to the GeoJSON, we include the following data on the map legend:</p>
<ul class="simple">
<li><p>Event ID</p></li>
<li><p>Event information (magnitude, date/time)</p></li>
<li><p>Maximum intensity</p></li>
<li><p>Number of entries represented in the database (note that some entries might be off-map)</p></li>
<li><p>The basemap from OpenStreetMaps (<a class="reference external" href="https://www.openstreetmap.org/">https://www.openstreetmap.org/</a>)</p></li>
</ul>
<p><strong>New in DYFI Version 4</strong></p>
<p>While the previous version of DYFI used Generic Mapping Tools (GMT) for static map creation, DYFI now uses <cite>Leaflet</cite> for map generation. See <cite>Creation of static images</cite> for details.</p>
<p>DYFI now has the the ability to plot the intensity data with different levels of transparency, depending on how many entries (not including filtered or suspect entries) which were used in computing the intensity in a particular aggregated block. This provides an intuitive sense of where the DYFI data is most robust (solid colored blocks) and where the intensity is uncertain because there are fewer data points in that location (transparent blocks).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Number of entries</p></td>
<td><p>Opacity level (1=solid)</p></td>
</tr>
<tr class="row-even"><td><p>&lt;1</p></td>
<td><p>0.3</p></td>
</tr>
<tr class="row-odd"><td><p>10+</p></td>
<td><p>1.0</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="kml">
<h3>KML<a class="headerlink" href="#kml" title="Permalink to this headline">¶</a></h3>
<p>Filename: dyfi_combined.kmz</p>
<p>KML (Keyhole Markup Language) is a file format used to display geographic data in an Earth browser such as Google Earth. The <em>.kmz</em> extension means that the data has been zipped (compressed). For more information see <a class="reference external" href="https://developers.google.com/kml/">https://developers.google.com/kml/</a>.</p>
<p>This KML dataset contains three layers:</p>
<ul class="simple">
<li><p>epicenter data (latitude/longitude/event time)</p></li>
<li><p>the 1km aggregated dataset</p></li>
<li><p>the 10km aggregated datast</p></li>
</ul>
</div>
<div class="section" id="xml">
<h3>XML<a class="headerlink" href="#xml" title="Permalink to this headline">¶</a></h3>
<p>Filename: <cite>contents.xml</cite></p>
<p>The file <cite>contents.xml</cite> is used only by the USGS Event Pages website to indicate which DYFI products will be available for display and/or download. It includes a full listing of each product along with the available file formats. If you are not exporting to the USGS Event Pages, this file is not necessary.</p>
</div>
</div>
<div class="section" id="graph-products">
<h2>Graph Products<a class="headerlink" href="#graph-products" title="Permalink to this headline">¶</a></h2>
<p>Note that a static image is no longer provided by DYFI. The USGS Event Pages are expected to take this data and render it on a browser via the <code class="xref py py-obj docutils literal notranslate"><span class="pre">D3</span></code> visualization package.</p>
<p>Instead, the graph data is packaged in a JSON file. Each dataset is stored in a <strong>dataset</strong> array (see details of each file below), along with the title and x and y axis labels for plotting.</p>
<div class="section" id="distance-vs-intensity-datafile">
<h3>Distance vs Intensity Datafile<a class="headerlink" href="#distance-vs-intensity-datafile" title="Permalink to this headline">¶</a></h3>
<p>Filename: dyfi_plot_atten.json</p>
<p>This file is a summary of the DYFI data in a format suitable for plotting in a graph that compares intensities with distance. The <strong>x</strong> axis in each dataset is <strong>epicentral distance</strong>. The <strong>y</strong> axis is intensity. Data that is deemed suspect of filtered out is not included in these datasets.</p>
<p>In addition to the aggregated data (i.e. “real world” data), this file includes the mean and median of the data at various distance bins, for plotting; and “expected” intensities based on various Intensity Prediction Equations.</p>
<div class="section" id="aggregated-data">
<h4>Aggregated data<a class="headerlink" href="#aggregated-data" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>class</p></td>
<td><p>scatterplot1</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>epicentral distance, intensity</p></td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>scatterdata</p></td>
</tr>
<tr class="row-even"><td><p>legend</p></td>
<td><p>Aggregated geo_10km data</p></td>
</tr>
</tbody>
</table>
<p>This dataset is the intensity and <strong>epicentral</strong> distance for each aggregated block. Each datapoint represents one UTM block. The <strong>x</strong> of each datapoint is the epicentral distance computed to the geographical center of the block. The <strong>y</strong> coordinate is the computed intensity for all entries in that block.</p>
</div>
<div class="section" id="mean-of-aggregated-data">
<h4>Mean of aggregated data<a class="headerlink" href="#mean-of-aggregated-data" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>class</p></td>
<td><p>mean</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>see below</p></td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>meanBinned</p></td>
</tr>
<tr class="row-even"><td><p>legend</p></td>
<td><p>Mean intensity in bin</p></td>
</tr>
</tbody>
</table>
<p>For this dataset, the aggregated data is binned together into bins of equal log distance. Each datapoint in this dataset represents a distance bin.  Within each bin, we compute the mean value and standard deviation of the intensities of all aggregated blocks inside the bin. Each point (bin) has the following data:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>min_x</p></td>
<td><p>The minimum distance of this bin</p></td>
</tr>
<tr class="row-even"><td><p>max_x</p></td>
<td><p>The maximum distance of this bin</p></td>
</tr>
<tr class="row-odd"><td><p>x</p></td>
<td><p>The log mean distance of this bin (for plotting)</p></td>
</tr>
<tr class="row-even"><td><p>y</p></td>
<td><p>The mean of the intensities of all blocks in this bin</p></td>
</tr>
<tr class="row-odd"><td><p>stdev</p></td>
<td><p>The standard deviation of the intensities</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="median-of-aggregated-data">
<h4>Median of aggregated data<a class="headerlink" href="#median-of-aggregated-data" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 82%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>class</p></td>
<td><p>median</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>see below</p></td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>medianBinned</p></td>
</tr>
<tr class="row-even"><td><p>legend</p></td>
<td><p>Median intensity in bin</p></td>
</tr>
</tbody>
</table>
<p>For this dataset, the aggregated data is binned together into bins of equal log distance. Each datapoint in this dataset represents a distance bin.  Within each bin, we compute the median value of the intensities of all aggregated blocks inside the bin. Each point (bin) has the following data:</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>min_x</p></td>
<td><p>The minimum distance of this bin</p></td>
</tr>
<tr class="row-even"><td><p>max_x</p></td>
<td><p>The maximum distance of this bin</p></td>
</tr>
<tr class="row-odd"><td><p>x</p></td>
<td><p>The log mean distance of this bin (for plotting)</p></td>
</tr>
<tr class="row-even"><td><p>y</p></td>
<td><p>The median of the intensities of all blocks in this bin</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
<div class="section" id="estimated-intensity-1">
<h4>Estimated Intensity 1<a class="headerlink" href="#estimated-intensity-1" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>class</p></td>
<td><p>estimated_1</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>x,y pairs of distance and intensity</p></td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>ipe_aww2014_wna</p></td>
</tr>
<tr class="row-even"><td><p>legend</p></td>
<td><p>Atkinson, Worden, Wald 2014 (WNA)</p></td>
</tr>
</tbody>
</table>
<p>This dataset is used for comparing an IPE (Intensity Prediction Equation) to the actual DYFI data. The IPE used to compute the expected intensity for a typical earthquake of this magnitude, calculated at evenly spaced intervals for plotting.</p>
<p>In this case, the IPE is Atkinson, Worden, Wald 2014 (Western North America). This IPE may be changed in the future. For more on IPEs, see the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Scientific</span> <span class="pre">Discussion</span></code>.</p>
</div>
<div class="section" id="estimated-intensity-2">
<h4>Estimated Intensity 2<a class="headerlink" href="#estimated-intensity-2" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>class</p></td>
<td><p>estimated_2</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>x,y pairs of distance and intensity</p></td>
</tr>
<tr class="row-odd"><td><p>id</p></td>
<td><p>ipe_aww2014_ena</p></td>
</tr>
<tr class="row-even"><td><p>legend</p></td>
<td><p>Atkinson, Worden, Wald 2014 (ENA)</p></td>
</tr>
</tbody>
</table>
<p>Same as above, except the IPE used is Atkinson, Worden, Wald 2014 (Eastern North America). this IPE may be changed in the future. For more on IPEs, see the <code class="xref py py-obj docutils literal notranslate"><span class="pre">Scientific</span> <span class="pre">Discussion</span></code>.</p>
</div>
</div>
<div class="section" id="time-vs-responses-datafile">
<h3>Time vs Responses Datafile<a class="headerlink" href="#time-vs-responses-datafile" title="Permalink to this headline">¶</a></h3>
<p>Filename: dyfi_plot_numresp.json</p>
<p>This file is a history of the DYFI entries submitted as a function of time after the event. The <strong>x</strong> axis in each dataset is the cumulative number of entries adn the <strong>y</strong> axis is the number of minutes or hours after the event (depending on the age of the event).</p>
<p>There is only one dataset included in this JSON file, called <em>data</em>. Each point represents a single entry, arranged in chronological order, with the following information.</p>
<blockquote>
<div><table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>t_absolute</p></td>
<td><p>the timestamp when this entry was received</p></td>
</tr>
<tr class="row-even"><td><p>t_seconds</p></td>
<td><p>number of seconds between t_absolute and the event</p></td>
</tr>
<tr class="row-odd"><td><p>x</p></td>
<td><p><strong>t_seconds</strong> scaled by the preferred unit</p></td>
</tr>
<tr class="row-even"><td><p>y</p></td>
<td><p>cumulative number of responses</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>The JSON data also has <strong>preferred_unit</strong>, either ‘minutes’ or ‘hours’; and <strong>preferred_conversion</strong>, which converts the preferred unit from seconds.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">USGS Did You Feel It? (DYFI)</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to Did You Feel It? (DYFI)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Product Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#dynamic-map-products">Dynamic Map Products</a></li>
<li class="toctree-l2"><a class="reference internal" href="#static-map-products">Static Map Products</a></li>
<li class="toctree-l2"><a class="reference internal" href="#graph-products">Graph Products</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="scientific-discussion.html">Scientific Discussion</a></li>
<li class="toctree-l1"><a class="reference internal" href="technical-guide.html">Technical Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="implementation-guide.html">Implementation Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dyfi-questionnaire-api.html">DYFI Questionnaire API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="app.html">rundyfi.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="app.html#makemovie-py">makemovie.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="app.html#makescreenshot-py">makescreenshot.py</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dyfi.html">Module list</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">Test Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Validation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="introduction.html" title="previous chapter">Introduction to Did You Feel It? (DYFI)</a></li>
      <li>Next: <a href="scientific-discussion.html" title="next chapter">Scientific Discussion</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020 USGS.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/product-guide.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>